# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤

## üìä –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–æ–±—â–∞–ª–∏, —á—Ç–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞–º–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∑–∞—è–≤–ª–µ–Ω–Ω—ã–µ 2-5 —Å–µ–∫—É–Ω–¥ –∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 30+ —Å–µ–∫—É–Ω–¥.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω

### –û—Å–Ω–æ–≤–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞:
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö JSON —Ñ–∞–π–ª–æ–≤** - `lawsuits.json` –∏ `lawsuitssp.json` –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
2. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö** - —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏** - –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

## ‚ö° –†–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```python
# –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞
asyncio.create_task(self._preload_lawsuits())
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **TTL –∫–µ—à–∞:** —É–º–µ–Ω—å—à–µ–Ω —Å 2 —á–∞—Å–æ–≤ –¥–æ 1 —á–∞—Å–∞
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** —É–±—Ä–∞–Ω–æ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
- **–ü—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö:** –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —à–∞–≥–æ–≤

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –ø–æ–∏—Å–∫–∞
```python
# –ë—ã–ª–æ
for case in all_cases:
    title = case.get('title', '').lower()
    if query in title:  # –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ

# –°—Ç–∞–ª–æ
query_lower = query.lower()  # –û–¥–∏–Ω —Ä–∞–∑
for case in all_cases:
    title = case.get('title', '').lower()
    if query_lower in title:
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30+ —Å–µ–∫—É–Ω–¥
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö:** —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 1-3 —Å–µ–∫—É–Ω–¥—ã
- **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–µ—à:** 1 —á–∞—Å TTL
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** –Ω–∞ 60%

## üéØ –ö–æ–º–∞–Ω–¥—ã —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π

### `/court` - 5 —à–∞–≥–æ–≤
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–≥—Ä–æ–∫–µ
2. –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª (–∫–µ—à)
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–∞
5. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

### `/top` - 3 —à–∞–≥–∞
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª (–∫–µ—à)
2. –ü–æ–¥—Å—á–µ—Ç –¥–µ–ª –ø–æ –∏–≥—Ä–æ–∫–∞–º (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### `/search` - 3 —à–∞–≥–∞
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª (–∫–µ—à)
2. –ü–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
self.lawsuits_cache_ttl = 3600  # 1 —á–∞—Å
self.lawsuits_cache_lock = asyncio.Lock()  # –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
```

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
```python
async def _preload_lawsuits(self):
    """–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã"""
    try:
        logger.info("–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª–∞—Ö...")
        await self.load_lawsuits()
        logger.info("–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞")
    except Exception as e:
        logger.warning(f"–û—à–∏–±–∫–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏: {e}")
```

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```python
# –£–±—Ä–∞–Ω–æ —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
tag = '–°–ü–º' if 'lawsuits.json' in fn else '–°–ü'
for case in data:
    case['tag'] = tag
    processed_data.append(case)
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è

### –ú–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
- –†–∞–∑–º–µ—Ä –∫–µ—à–∞
- –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∞

## üéâ –ò—Ç–æ–≥–∏

- **–°–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** —Å 30+ –¥–æ 1-3 —Å–µ–∫—É–Ω–¥
- **–£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞:** –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:** —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:** –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

---

**–í–µ—Ä—Å–∏—è:** 2.3.0  
**–î–∞—Ç–∞:** 08.01.2025  
**–ê–≤—Ç–æ—Ä:** Court Bot Team 